---
title: 《APUE》文件与目录
slug: apue-file-and-directory
categories:
  - Linux
tags:
- apue
date: 2020-08-14 11:16:11
---
# APUE: File and Directory

## 文件类型

- 普通文件（regular file)
- 目录文件
- 块特殊文件
- 字符特殊文件
- FIFO
- Socket
- 符号链接

## 用户 ID、组 ID

- 一般uid，gid 获取自登录项，并在登录会话期间不会改变。但超级用户进程可以改变它们
- 有效用户 ID，有效组 ID以及附属组 ID 决定了文件访问权限
- 每个文件有一个所有者和组所有者



## 文件访问权限

- 每个文件有 9 个访问权限位 // table
- 进程打开、创建或删除文件时，内核会进行文件访问权限测试。 // 测试流程



## 新文件和目录所有权

- 新文件的用户 ID 设置为有效用户ID
- 新文件组 ID 可以是进程的有效组 ID，或者所在目录的组 ID



## 文件长度

- `stat` 结构成员 `st_size` 表示以字节为单位的文件的长度，只对普通文件、目录文件和符号链接有意义
- 文件空洞？



## 文件截断

- 在文件尾端截去一部分数据缩短文件



## 文件系统

- 待定



## 符号链接

- 硬链接通常要求链接和文件位于同一文件系统
- 只有超级用户才能创建只想目录的硬链接



## 设备特殊文件

- 每个文件系统所在的存储设备都由其主、次设备号表示。
  - 主设备好标识设备驱动程序
  - 次设备号标识特定子设备
- 系统中与每个文件名关联的 `st_dev` 值是文件系统的设备号
- 只有字符特殊文件和块特殊文件才有 `st_rdev` 值，此值包含书籍设备的设备号